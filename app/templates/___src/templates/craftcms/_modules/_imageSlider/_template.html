{#
 Image Slider
 ============
#}

{# -- Set Vars -- #}
{% set classname = name is defined and name is not empty ? name : 'm-imageSlider' %}
{% set images = data.singleImages is defined ? data.singleImages %}
{% set settings = data.settingsImageSlider is defined ? data.settingsImageSlider %}

{% if settings.imageRatio is defined %}
  {% switch settings.imageRatio %}
  
  {% case "landscape" %}
  {% set ratio = '16:10' %}
  
  {% case "square" %}
  {% set ratio = '1:1' %}
  
  {% case "portrait" %}
  {% set ratio = '10:16' %}
  
  {% default %}
  {% set ratio = '' %}
  
  {% endswitch %}

{% else %}
  {% set ratio = '' %}
{% endif %}

{# -- Ratio -- #}
{% if ratio != '' %}
  {% set ratio = ratio|split(':') %}
  {% set ratio = ratio|first/ratio|last %}
{% endif %}

{# -- Modul -- #}
<!-- Slider main container -->
<div class="o-col  {{ classname ~ 'Wrapper' }}">
  <figure class="{{ classname }}  js-imageSlider"
          data-flickity='{
            "cellAlign": "left",
            "contain": true,
            "draggable": true,
            "friction": 1,
            "selectedAttraction": 0.1,
            "lazyLoad": 2,
            "groupCells": true,
            "imagesLoaded": true,
            "prevNextButtons": true,
            "pageDots": false,
            "rightToLeft": false,
            "watchCSS": false
          }' itemscope itemtype="http://schema.org/ImageGallery" role="presentation">
    <!-- Slides -->
    {% for image in images %}
      <div class="{{ classname ~ '__slide' }}" itemscope itemtype="http://schema.org/ImageObject">
  
        {# -- Res Image -- #}
        {% set options = {
        ratio: ratio
        } %}
  
        {{ macroImage.image(image, options) }}
        
        {# -- Set Position -- #}{#
        {% if image.settingsFocalPoint %}
          {% set position = image.settingsFocalPoint %}
        {% else %}
          {% set position = '50% 50%' %}
        {% endif %}
        
        {% set imageSizes = [
          { height: 500 },
          { height: 30 }
        ] %}
        
        {% set imageSettings = {
          ratio: ratio,
          position: position,
          mode: 'crop'
        } %}
  
        #}{# -- BG Image -- #}{#
        {% set images = craft.imager.transformImage(image, imageSizes, imageSettings) %}
  
        <img width="{{ image.width }}"
             height="{{ image.height }}"
             class="m-image"
             src="{{ images|last.url }}"
             data-flickity-lazyload="{{ images|first.url }}"
             alt="{{ image.title }}"/>#}
      </div>
    {% endfor %}
  </figure>
</div>
